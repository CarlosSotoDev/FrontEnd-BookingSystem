<div class="container mx-auto p-4">
  <h1 class="text-2xl mb-4">Lista de Vuelos</h1>

  <!-- Barra de búsqueda y botón de buscar -->
  <div class="mb-4 flex">
    <input 
      type="text" 
      placeholder="Buscar vuelo por origen..." 
      [(ngModel)]="searchCityOrigin" 
      class="border border-gray-400 p-2 w-1/3 rounded-l" />
    <input 
      type="text" 
      placeholder="Buscar vuelo por destino..." 
      [(ngModel)]="searchDestination" 
      class="border border-gray-400 p-2 w-1/3 rounded-l ml-2" />
    <button 
      (click)="searchFlights()" 
      class="bg-blue-500 text-white p-2 ml-2 rounded">
      Buscar
    </button>
  </div>

  <!-- Botón para crear un nuevo registro -->
  <div class="mb-4">
    <button (click)="openCreateModal()" class="bg-green-500 text-white p-2 rounded">
      Crear Registro
    </button>
  </div>

  <!-- Modal para crear un nuevo vuelo -->
  <div *ngIf="showCreateModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white p-4 rounded shadow-lg w-1/3">
      <h2 class="text-xl mb-4">Crear Nuevo Vuelo</h2>
      <div class="mb-2">
        <label class="block">Origen:</label>
        <input type="text" [(ngModel)]="newFlight.cityOrigin" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Destino:</label>
        <input type="text" [(ngModel)]="newFlight.destination" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Fecha de Salida:</label>
        <input type="date" [(ngModel)]="newFlight.departureDate" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Hora de Salida:</label>
        <input type="time" [(ngModel)]="newFlight.departureTime" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Precio:</label>
        <input type="number" [(ngModel)]="newFlight.price" class="border p-2 w-full" />
      </div>
      <div class="flex justify-end">
        <button (click)="closeCreateModal()" class="bg-gray-500 text-white p-2 rounded mr-2">
          Cancelar
        </button>
        <button (click)="createFlight()" class="bg-green-500 text-white p-2 rounded">
          Crear
        </button>
      </div>
    </div>
  </div>

  <!-- Modal para editar un vuelo -->
  <div *ngIf="showEditModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white p-4 rounded shadow-lg w-1/3">
      <h2 class="text-xl mb-4">Editar Vuelo</h2>
      <div class="mb-2">
        <label class="block">Origen:</label>
        <input type="text" [(ngModel)]="selectedFlight.cityOrigin" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Destino:</label>
        <input type="text" [(ngModel)]="selectedFlight.destination" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Fecha de Salida:</label>
        <input type="date" [(ngModel)]="selectedFlight.departureDate" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Hora de Salida:</label>
        <input type="time" [(ngModel)]="selectedFlight.departureTime" class="border p-2 w-full" />
      </div>
      <div class="mb-2">
        <label class="block">Precio:</label>
        <input type="number" [(ngModel)]="selectedFlight.price" class="border p-2 w-full" />
      </div>
      <div class="flex justify-end">
        <button (click)="closeEditModal()" class="bg-gray-500 text-white p-2 rounded mr-2">
          Cancelar
        </button>
        <button (click)="updateFlight()" class="bg-blue-500 text-white p-2 rounded">
          Actualizar
        </button>
      </div>
    </div>
  </div>

  <!-- Mostrar indicador de carga -->
  <div *ngIf="isLoading" class="text-center">
    <p>Cargando vuelos...</p>
  </div>

  <!-- Mostrar mensaje si no hay vuelos -->
  <div *ngIf="!isLoading && flights.length === 0" class="text-center">
    <p>No se encontraron vuelos.</p>
  </div>

  <!-- Mostrar tabla de vuelos -->
  <div *ngIf="!isLoading && flights.length > 0">
    <table class="table-auto w-full border-collapse border border-gray-400">
      <thead>
        <tr class="bg-gray-800 text-white">
          <th class="border border-gray-400 p-2">Origen</th>
          <th class="border border-gray-400 p-2">Destino</th>
          <th class="border border-gray-400 p-2">Fecha de Salida</th>
          <th class="border border-gray-400 p-2">Hora de Salida</th>
          <th class="border border-gray-400 p-2">Precio</th>
          <th class="border border-gray-400 p-2">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let flight of flights" class="text-center">
          <td class="border border-gray-400 p-2">{{ flight.cityOrigin }}</td>
          <td class="border border-gray-400 p-2">{{ flight.destination }}</td>
          <td class="border border-gray-400 p-2">{{ flight.departureDate | date }}</td>
          <td class="border border-gray-400 p-2">{{ flight.departureTime }}</td>
          <td class="border border-gray-400 p-2">{{ flight.price | currency }}</td>
          <td class="border border-gray-400 p-2">
            <button (click)="openEditModal(flight)" class="bg-blue-500 text-white p-2 rounded">
              Editar
            </button>
            <button *ngIf="flight.id" (click)="deleteFlight(flight.id)" class="bg-red-500 text-white p-2 rounded ml-2">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
